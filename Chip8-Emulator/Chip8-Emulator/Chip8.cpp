
#include "Chip8.hpp"

#include <algorithm>

Chip8::Chip8()
{
	Init();
}

void Chip8::Init()
{
	std::fill(std::begin(mMemory), std::end(mMemory), 0);
	std::fill(std::begin(mV), std::end(mV), 0);
	std::fill(std::begin(mGfx), std::end(mGfx), 0);
	std::fill(std::begin(mStack), std::end(mStack), 0);
	std::fill(std::begin(mKeys), std::end(mKeys), 0);

	mIndexReg = 0;
	mSP = 0;
	mPC = 512;

	const std::array<const unsigned char, 80> fontSet =
	{
		0xF0, 0x90, 0x90, 0x90, 0xF0, //0
		0x20, 0x60, 0x20, 0x20, 0x70, //1
		0xF0, 0x10, 0xF0, 0x80, 0xF0, //2
		0xF0, 0x10, 0xF0, 0x10, 0xF0, //3
		0x90, 0x90, 0xF0, 0x10, 0x10, //4
		0xF0, 0x80, 0xF0, 0x10, 0xF0, //5
		0xF0, 0x80, 0xF0, 0x90, 0xF0, //6
		0xF0, 0x10, 0x20, 0x40, 0x40, //7
		0xF0, 0x90, 0xF0, 0x90, 0xF0, //8
		0xF0, 0x90, 0xF0, 0x10, 0xF0, //9
		0xF0, 0x90, 0xF0, 0x90, 0x90, //A
		0xE0, 0x90, 0xE0, 0x90, 0xE0, //B
		0xF0, 0x80, 0x80, 0x80, 0xF0, //C
		0xE0, 0x90, 0x90, 0x90, 0xE0, //D
		0xF0, 0x80, 0xF0, 0x80, 0xF0, //E
		0xF0, 0x80, 0xF0, 0x80, 0x80  //F
	};

	std::copy(std::begin(fontSet), std::end(fontSet), std::begin(mMemory));
}